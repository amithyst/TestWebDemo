{# templates/MC_command/formsets/_firework_explosion_formset.html #}
<div class="component-formset" id="{{ prefix }}-group">
    {{ formset.management_form }}
    <h4 class="component-title">{{ verbose_name }}</h4>
    <div id="{{ prefix }}-forms-container">
        {% for form in formset %}
            <div class="form-row dynamic-form" id="{{ form.prefix }}-row">
                {{ form.id }}
                <div class="row align-items-center mb-2">
                    <div class="col-md-2">
                        {{ form.shape.label_tag }}
                        {{ form.shape }}
                    </div>
                    <div class="col-md-3">
                        <label>颜色</label>
                        <div class="color-picker-widget" data-target-input="#{{ form.colors.id_for_label }}"></div>
                        {{ form.colors }} {# Hidden input #}
                    </div>
                    <div class="col-md-3">
                        <label>淡出颜色</label>
                        <div class="color-picker-widget" data-target-input="#{{ form.fade_colors.id_for_label }}"></div>
                        {{ form.fade_colors }} {# Hidden input #}
                    </div>
                    <div class="col-md-3">
                        <div class="form-check form-check-inline">
                            {{ form.has_trail }}
                            <label class="form-check-label" for="{{ form.has_trail.id_for_label }}">拖尾</label>
                        </div>
                        <div class="form-check form-check-inline">
                            {{ form.has_twinkle }}
                            <label class="form-check-label" for="{{ form.has_twinkle.id_for_label }}">闪烁</label>
                        </div>
                    </div>
                    <div class="col-md-1">
                        {% if form.instance.pk %}
                            <div class="form-check">
                                {{ form.DELETE }}
                                <label class="form-check-label" for="{{ form.DELETE.id_for_label }}">删除</label>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    <button type="button" class="btn btn-outline-success btn-sm add-form-row" data-prefix="{{ prefix }}">添加一个爆炸效果</button>
</div>

{# 空表单模板，用于JS动态添加 #}
<div class="empty-form-template" id="{{ prefix }}-empty-form" style="display:none">
    <div class="form-row dynamic-form" id="__prefix__-row">
        {{ formset.empty_form.id }}
        <div class="row align-items-center mb-2">
            <div class="col-md-2">
                {{ formset.empty_form.shape.label_tag }}
                {{ formset.empty_form.shape }}
            </div>
            <div class="col-md-3">
                <label>颜色</label>
                <div class="color-picker-widget" data-target-input="#{{ formset.empty_form.colors.id_for_label }}"></div>
                {{ formset.empty_form.colors }}
            </div>
            <div class="col-md-3">
                <label>淡出颜色</label>
                <div class="color-picker-widget" data-target-input="#{{ formset.empty_form.fade_colors.id_for_label }}"></div>
                {{ formset.empty_form.fade_colors }}
            </div>
            <div class="col-md-3">
                <div class="form-check form-check-inline">
                    {{ formset.empty_form.has_trail }}
                    <label class="form-check-label" for="{{ formset.empty_form.has_trail.id_for_label }}">拖尾</label>
                </div>
                <div class="form-check form-check-inline">
                    {{ formset.empty_form.has_twinkle }}
                    <label class="form-check-label" for="{{ formset.empty_form.has_twinkle.id_for_label }}">闪烁</label>
                </div>
            </div>
            <div class="col-md-1">
                <div class="form-check">
                    {{ formset.empty_form.DELETE }}
                    <label class="form-check-label" for="{{ formset.empty_form.DELETE.id_for_label }}">删除</label>
                </div>
            </div>
        </div>
    </div>
</div>